ALTER TABLE page DROP FOREIGN KEY FKpage818672;
ALTER TABLE pageLid DROP FOREIGN KEY FKpageLid998175;
ALTER TABLE pageLid DROP FOREIGN KEY FKpageLid886583;
ALTER TABLE post DROP FOREIGN KEY FKpost983184;
ALTER TABLE post DROP FOREIGN KEY FKpost871592;
ALTER TABLE vote DROP FOREIGN KEY FKvote377775;
ALTER TABLE vote DROP FOREIGN KEY FKvote804422;
ALTER TABLE user_chat DROP FOREIGN KEY FKuser_chat410197;
ALTER TABLE user_chat DROP FOREIGN KEY FKuser_chat558345;
ALTER TABLE chatMessage DROP FOREIGN KEY FKchatMessag169864;
ALTER TABLE chatMessage DROP FOREIGN KEY FKchatMessag21716;
ALTER TABLE post DROP FOREIGN KEY FKpost75210;
ALTER TABLE `user` DROP FOREIGN KEY FKuser493172;
ALTER TABLE media DROP FOREIGN KEY FKmedia538898;
ALTER TABLE media_post DROP FOREIGN KEY FKmedia_post671877;
ALTER TABLE media_post DROP FOREIGN KEY FKmedia_post745297;
ALTER TABLE page DROP FOREIGN KEY FKpage135695;
ALTER TABLE newPassword DROP FOREIGN KEY FKnewPasswor304528;
DROP TABLE IF EXISTS `user`;
DROP TABLE IF EXISTS page;
DROP TABLE IF EXISTS chatMessages;
DROP TABLE IF EXISTS pageLid;
DROP TABLE IF EXISTS post;
DROP TABLE IF EXISTS vote;
DROP TABLE IF EXISTS chat;
DROP TABLE IF EXISTS user_chat;
DROP TABLE IF EXISTS chatMessage;
DROP TABLE IF EXISTS media;
DROP TABLE IF EXISTS media_post;
DROP TABLE IF EXISTS newPassword;
CREATE TABLE `user` (ID int(10) NOT NULL AUTO_INCREMENT, profilePicture int(10), name varchar(255), email varchar(255) NOT NULL UNIQUE, hash varchar(255), salt varchar(255), PRIMARY KEY (ID), UNIQUE INDEX (ID));
CREATE TABLE page (ID int(10) NOT NULL AUTO_INCREMENT, pageCreator int(10) NOT NULL, banner int(10), PRIMARY KEY (ID), UNIQUE INDEX (ID));
CREATE TABLE chatMessages ();
CREATE TABLE pageLid (userID int(10) NOT NULL, pageID int(10) NOT NULL, PRIMARY KEY (userID, pageID));
CREATE TABLE post (ID int(10) NOT NULL AUTO_INCREMENT, userID int(10) NOT NULL, pageID int(10) NOT NULL, repliedTo int(10), text text NOT NULL, PRIMARY KEY (ID), UNIQUE INDEX (ID));
CREATE TABLE vote (postID int(10) NOT NULL, userID int(10) NOT NULL, vote tinyint, PRIMARY KEY (postID, userID));
CREATE TABLE chat (ID int(10) NOT NULL AUTO_INCREMENT, name varchar(255), PRIMARY KEY (ID), UNIQUE INDEX (ID));
CREATE TABLE user_chat (userID int(10) NOT NULL, chatID int(10) NOT NULL, PRIMARY KEY (userID, chatID));
CREATE TABLE chatMessage (userID int(10) NOT NULL, chatID int(10) NOT NULL, message text NOT NULL);
CREATE TABLE media (id int(10) NOT NULL AUTO_INCREMENT, location varchar(255) NOT NULL UNIQUE, owner int(10) NOT NULL, PRIMARY KEY (id), UNIQUE INDEX (id));
CREATE TABLE media_post (mediaid int(10) NOT NULL, postID int(10) NOT NULL, PRIMARY KEY (mediaid, postID));
CREATE TABLE newPassword (ID int(11) NOT NULL AUTO_INCREMENT, validUntil date NOT NULL, code varchar(255) NOT NULL, userID int(10) NOT NULL, PRIMARY KEY (ID));
ALTER TABLE page ADD CONSTRAINT FKpage818672 FOREIGN KEY (pageCreator) REFERENCES `user` (ID);
ALTER TABLE pageLid ADD CONSTRAINT FKpageLid998175 FOREIGN KEY (userID) REFERENCES `user` (ID);
ALTER TABLE pageLid ADD CONSTRAINT FKpageLid886583 FOREIGN KEY (pageID) REFERENCES page (ID);
ALTER TABLE post ADD CONSTRAINT FKpost983184 FOREIGN KEY (userID) REFERENCES `user` (ID);
ALTER TABLE post ADD CONSTRAINT FKpost871592 FOREIGN KEY (pageID) REFERENCES page (ID);
ALTER TABLE vote ADD CONSTRAINT FKvote377775 FOREIGN KEY (postID) REFERENCES post (ID);
ALTER TABLE vote ADD CONSTRAINT FKvote804422 FOREIGN KEY (userID) REFERENCES `user` (ID);
ALTER TABLE user_chat ADD CONSTRAINT FKuser_chat410197 FOREIGN KEY (userID) REFERENCES `user` (ID);
ALTER TABLE user_chat ADD CONSTRAINT FKuser_chat558345 FOREIGN KEY (chatID) REFERENCES chat (ID);
ALTER TABLE chatMessage ADD CONSTRAINT FKchatMessag169864 FOREIGN KEY (userID) REFERENCES `user` (ID);
ALTER TABLE chatMessage ADD CONSTRAINT FKchatMessag21716 FOREIGN KEY (chatID) REFERENCES chat (ID);
ALTER TABLE post ADD CONSTRAINT FKpost75210 FOREIGN KEY (repliedTo) REFERENCES post (ID);
ALTER TABLE `user` ADD CONSTRAINT FKuser493172 FOREIGN KEY (profilePicture) REFERENCES media (id);
ALTER TABLE media ADD CONSTRAINT FKmedia538898 FOREIGN KEY (owner) REFERENCES `user` (ID);
ALTER TABLE media_post ADD CONSTRAINT FKmedia_post671877 FOREIGN KEY (mediaid) REFERENCES media (id);
ALTER TABLE media_post ADD CONSTRAINT FKmedia_post745297 FOREIGN KEY (postID) REFERENCES post (ID);
ALTER TABLE page ADD CONSTRAINT FKpage135695 FOREIGN KEY (banner) REFERENCES media (id);
ALTER TABLE newPassword ADD CONSTRAINT FKnewPasswor304528 FOREIGN KEY (userID) REFERENCES `user` (ID);
